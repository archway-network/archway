# CWErrors

This module is the error handling mechanism for the protocol to let the contract know of errors encountered

## Concepts

[callback](../../callback/spec/README.md) module and [cwica](../../cwica/spec/README.md) module both rely on protocol invoking contract execution. In case, there are any errors generated by the protocol, there needs to be a way to let the contract know of this error. The module provides a standard way of error catching of from the contract side.

The module provides two diffferent ways that the error is communicated.

### Saved Errors (default)

Whenever a contract relevant error is encountered by the protocol, the module stores the error and associates with the contract address. This is stored in the chain state for `x` number of blocks (The `x` value is a module parameter. [See more](./params.md)) after which the error is permanently deleted. These stored errors are queryable by the contract using stargate queries.

### Error sudo invoke

If a contract is subscribed to errors, then the contarct will be invoked at the sudo entrypoint like so.

```rust
#[cw_serde]
pub enum SudoMsg  {
    Error {
        module_name: String, // The name of the module which generated the error
        error_code: u32, // module specific error code
        input_payload: String, // any relevant input payload which caused the error
        error_message: String, // the relevant error message
    }
}
```

## Contents

1. [State](./01_state.md)
2. [Messages](./02_messages.md)
3. [End Block](./03_end_block.md)
4. [Events](./04_events.md)
5. [Client](./05_client.md)

## References

1. [RFC: x/cwerrors module](https://github.com/orgs/archway-network/discussions/35)
2. [AIP: x/cwerrors module](https://github.com/archway-network/archway/issues/544)
